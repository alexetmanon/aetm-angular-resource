!function(){"use strict";angular.module("aetm-resource",["ngResource","angular-cache"]).factory("aetmResource",["$resource","$q","CacheFactory",function(e,r,t){function a(){var e=s.get(n);return e&&1===e.$$state.status?angular.fromJson(e.$$state.value.data):[]}function o(e,t,o){var n,u=a(),s=u.length;for(n=0;s>n;n+=1)if(u[n].id===e.id)return t(u[n]),angular.extend(u[n],{$promise:r.resolve(u[n]),$resolved:!0});return c.get(e,t,o)}var c,n,u,s,g;return u="aetm-resource-cache-"+Math.random().toString(36).slice(2),s=t.createCache(u,{storageMode:"localStorage"}),g={query:{method:"GET",isArray:!0,cache:s},get:{method:"GET",cache:s},create:{method:"POST"},update:{method:"PUT"}},function(r,t,a,u){return n=r.replace(/(\/\:\w*)/g,""),c=e(r,t,angular.merge({},g,a),u),c.getFromQuery=o,c.invalidateCache=function(){s.removeAll()},c.getCache=function(){return s},c}}])}();